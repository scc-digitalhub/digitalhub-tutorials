kind: python
metadata:
  project: project-ml-ci
  name: train
  embedded: false
spec:
  python_version: PYTHON3_10
  requirements:
  - scikit-learn==1.2.2
  source:
    source: src/train-model.py
    base64: CgppbXBvcnQgcGFuZGFzIGFzIHBkCmZyb20gc2tsZWFybi5kYXRhc2V0cyBpbXBvcnQgbG9hZF9icmVhc3RfY2FuY2VyCmZyb20gc2tsZWFybi5tb2RlbF9zZWxlY3Rpb24gaW1wb3J0IHRyYWluX3Rlc3Rfc3BsaXQKCmZyb20gZGlnaXRhbGh1Yl9ydW50aW1lX3B5dGhvbiBpbXBvcnQgaGFuZGxlcgpmcm9tIHNrbGVhcm4uc3ZtIGltcG9ydCBTVkMKZnJvbSBwaWNrbGUgaW1wb3J0IGR1bXAKaW1wb3J0IHNrbGVhcm4ubWV0cmljcwppbXBvcnQgb3MKCkBoYW5kbGVyKG91dHB1dHM9WyJkYXRhc2V0Il0pCmRlZiB0cmFpbihwcm9qZWN0LCBkaSk6CgogICAgZGZfY2FuY2VyID0gZGkuYXNfZGYoKQogICAgWCA9IGRmX2NhbmNlci5kcm9wKFsndGFyZ2V0J10sYXhpcz0xKQogICAgeSA9IGRmX2NhbmNlclsndGFyZ2V0J10KICAgIFhfdHJhaW4sIFhfdGVzdCwgeV90cmFpbiwgeV90ZXN0ID0gdHJhaW5fdGVzdF9zcGxpdChYLCB5LCB0ZXN0X3NpemUgPSAwLjIwLCByYW5kb21fc3RhdGU9NSkKICAgIHN2Y19tb2RlbCA9IFNWQygpCiAgICBzdmNfbW9kZWwuZml0KFhfdHJhaW4sIHlfdHJhaW4pCiAgICB5X3ByZWRpY3QgPSBzdmNfbW9kZWwucHJlZGljdChYX3Rlc3QpCgogICAgaWYgbm90IG9zLnBhdGguZXhpc3RzKCJtb2RlbCIpOgogICAgICAgIG9zLm1ha2VkaXJzKCJtb2RlbCIpCgogICAgd2l0aCBvcGVuKCJtb2RlbC9jYW5jZXJfY2xhc3NpZmllci5wa2wiLCAid2IiKSBhcyBmOgogICAgICAgIGR1bXAoc3ZjX21vZGVsLCBmLCBwcm90b2NvbD01KQoKICAgIG1ldHJpY3MgPSB7CiAgICAgICAgImYxX3Njb3JlIjogc2tsZWFybi5tZXRyaWNzLmYxX3Njb3JlKHlfdGVzdCwgeV9wcmVkaWN0KSwKICAgICAgICAiYWNjdXJhY3kiOiBza2xlYXJuLm1ldHJpY3MuYWNjdXJhY3lfc2NvcmUoeV90ZXN0LCB5X3ByZWRpY3QpLAogICAgICAgICJwcmVjaXNpb24iOiBza2xlYXJuLm1ldHJpY3MucHJlY2lzaW9uX3Njb3JlKHlfdGVzdCwgeV9wcmVkaWN0KSwKICAgICAgICAicmVjYWxsIjogc2tsZWFybi5tZXRyaWNzLnJlY2FsbF9zY29yZSh5X3Rlc3QsIHlfcHJlZGljdCksCiAgICB9CiAgICBwcm9qZWN0LmxvZ19tb2RlbCgKICAgICAgICAgICAgbmFtZT0iY2FuY2VyX2NsYXNzaWZpZXIiLAogICAgICAgICAgICBraW5kPSJza2xlYXJuIiwKICAgICAgICAgICAgc291cmNlPSIuL21vZGVsLyIsCiAgICAgICAgICAgIG1ldHJpY3M9bWV0cmljcwogICAgKQo=
    handler: train
    lang: python
status:
  state: CREATED
project: project-ml-ci
name: train
id: d1e4a950-0d3e-4898-853b-3b446124dd4c
key: store://project-ml-ci/function/python/train:d1e4a950-0d3e-4898-853b-3b446124dd4c
